<!DOCTYPE html>
<html ng-app="memoryGameApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1920, height=1080">
    <title>Memory Game - Tizen TV</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            padding: 40px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 60px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            animation: titlePulse 2s ease-in-out infinite;
        }
        
        @keyframes titlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 30px;
        }
        
        .stat-box {
            background: rgba(255,255,255,0.2);
            padding: 15px 40px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            text-align: center;
            transition: all 0.3s;
        }
        
        .stat-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .stat-label {
            font-size: 18px;
            color: rgba(255,255,255,0.9);
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: white;
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            perspective: 1000px;
        }
        
        .card-container {
            aspect-ratio: 1;
            position: relative;
            cursor: pointer;
        }
        
        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
        }
        
        .card.flipped {
            transform: rotateY(180deg);
        }
        
        .card.matched {
            animation: matchSuccess 0.8s ease;
        }
        
        @keyframes matchSuccess {
            0% { transform: rotateY(180deg) scale(1); }
            50% { transform: rotateY(180deg) scale(1.2); }
            100% { transform: rotateY(180deg) scale(1); }
        }
        
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .card-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transform: rotateY(180deg);
            color: white;
        }
        
        .card-back {
            background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
            position: relative;
            overflow: hidden;
        }
        
        .card-back::before {
            content: '?';
            font-size: 100px;
            color: #f5576c;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .card-back::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255,255,255,0.1) 10px,
                rgba(255,255,255,0.1) 20px
            );
            animation: shimmer 3s linear infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translate(-50%, -50%); }
            100% { transform: translate(50%, 50%); }
        }
        
        .card-container.focused .card {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255,255,255,0.8);
        }
        
        .card-container.focused .card.flipped {
            transform: rotateY(180deg) scale(1.1);
        }
        
        .card-container.focused .card-face {
            border: 5px solid yellow;
        }
        
        .win-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 1000;
        }
        
        .win-screen.show {
            display: flex;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .win-screen h2 {
            font-size: 80px;
            color: #4ecdc4;
            margin-bottom: 30px;
            animation: winBounce 1s infinite;
        }
        
        @keyframes winBounce {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(-5deg); }
            75% { transform: translateY(-20px) rotate(5deg); }
        }
        
        .win-screen p {
            font-size: 30px;
            color: white;
            margin-bottom: 40px;
        }
        
        .win-screen button {
            font-size: 28px;
            padding: 20px 60px;
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .win-screen button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        }
        
        .controls {
            text-align: center;
            color: white;
            font-size: 18px;
            margin-top: 20px;
            opacity: 0.9;
            animation: fadeInUp 1s;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 0.9;
                transform: translateY(0);
            }
        }
        
        .difficulty-selector {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .difficulty-btn {
            padding: 10px 25px;
            margin: 0 10px;
            border: 2px solid white;
            background: rgba(255,255,255,0.2);
            color: white;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .difficulty-btn.active {
            background: rgba(255,255,255,0.4);
            transform: scale(1.1);
        }
        
        .particle {
            position: fixed;
            pointer-events: none;
            animation: particleFloat 2s ease-out forwards;
        }
        
        @keyframes particleFloat {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(0);
            }
        }
    </style>
</head>
<body ng-controller="MemoryGameController">
    <div class="header">
        <h1>üß† MEMORY GAME</h1>
    </div>
    
    <div class="difficulty-selector">
        <button class="difficulty-btn" ng-class="{active: difficulty === 'easy'}" ng-click="setDifficulty('easy')">
            Easy (4x2)
        </button>
        <button class="difficulty-btn" ng-class="{active: difficulty === 'medium'}" ng-click="setDifficulty('medium')">
            Medium (4x4)
        </button>
        <button class="difficulty-btn" ng-class="{active: difficulty === 'hard'}" ng-click="setDifficulty('hard')">
            Hard (6x4)
        </button>
    </div>
    
    <div class="stats">
        <div class="stat-box">
            <div class="stat-label">Moves</div>
            <div class="stat-value">{{moves}}</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Matches</div>
            <div class="stat-value">{{matchedPairs}}/{{totalPairs}}</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Time</div>
            <div class="stat-value">{{formatTime(elapsedTime)}}</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Best Time</div>
            <div class="stat-value">{{formatTime(bestTime)}}</div>
        </div>
    </div>
    
    <div class="game-board" ng-style="{'grid-template-columns': 'repeat(' + cols + ', 1fr)'}">
        <div class="card-container" 
             ng-repeat="card in cards track by card.id"
             ng-class="{focused: focusedIndex === $index}">
            <div class="card" 
                 ng-class="{flipped: card.flipped || card.matched, matched: card.matched}">
                <div class="card-face card-front">
                    {{card.emoji}}
                </div>
                <div class="card-face card-back"></div>
            </div>
        </div>
    </div>
    
    <div class="controls">
        Use Arrow Keys to navigate | Press OK to flip card | Press Back to restart
    </div>
    
    <div class="win-screen" ng-class="{show: gameWon}">
        <h2>üéâ YOU WIN! üéâ</h2>
        <p>
            Moves: {{moves}} | Time: {{formatTime(elapsedTime)}}
            <span ng-if="isNewRecord"> | üèÜ NEW RECORD!</span>
        </p>
        <button ng-click="restartGame()">Play Again (OK)</button>
    </div>
    
    <script>
        var app = angular.module('memoryGameApp', []);
        
        app.controller('MemoryGameController', function($scope, $interval, $timeout) {
            // Emoji sets
            const emojiSets = {
                easy: ['üçé', 'üçå', 'üçá', 'üçä'],
                medium: ['üçé', 'üçå', 'üçá', 'üçä', 'üçì', 'üçâ', 'üçí', 'üçë'],
                hard: ['üçé', 'üçå', 'üçá', 'üçä', 'üçì', 'üçâ', 'üçí', 'üçë', 'ü•ù', 'üçç', 'ü••', 'üçã']
            };
            
            const gridConfig = {
                easy: {rows: 2, cols: 4},
                medium: {rows: 4, cols: 4},
                hard: {rows: 4, cols: 6}
            };
            
            // Game state
            $scope.cards = [];
            $scope.flippedCards = [];
            $scope.matchedPairs = 0;
            $scope.totalPairs = 0;
            $scope.moves = 0;
            $scope.focusedIndex = 0;
            $scope.gameStarted = false;
            $scope.gameWon = false;
            $scope.elapsedTime = 0;
            $scope.bestTime = parseInt(localStorage.getItem('memoryBestTime')) || 0;
            $scope.difficulty = 'medium';
            $scope.rows = 4;
            $scope.cols = 4;
            $scope.isNewRecord = false;
            
            var timerInterval = null;
            var canFlip = true;
            
            // Initialize game
            $scope.initGame = function() {
                const config = gridConfig[$scope.difficulty];
                $scope.rows = config.rows;
                $scope.cols = config.cols;
                
                const emojis = emojiSets[$scope.difficulty];
                $scope.totalPairs = emojis.length;
                
                // Create card pairs
                const cardPairs = [...emojis, ...emojis]
                    .sort(() => Math.random() - 0.5)
                    .map((emoji, index) => ({
                        id: index,
                        emoji: emoji,
                        flipped: false,
                        matched: false
                    }));
                
                $scope.cards = cardPairs;
                $scope.flippedCards = [];
                $scope.matchedPairs = 0;
                $scope.moves = 0;
                $scope.focusedIndex = 0;
                $scope.gameStarted = false;
                $scope.gameWon = false;
                $scope.elapsedTime = 0;
                $scope.isNewRecord = false;
                canFlip = true;
                
                if (timerInterval) {
                    $interval.cancel(timerInterval);
                    timerInterval = null;
                }
            };
            
            // Set difficulty
            $scope.setDifficulty = function(level) {
                $scope.difficulty = level;
                $scope.initGame();
            };
            
            // Start timer
            $scope.startTimer = function() {
                if (!$scope.gameStarted) {
                    $scope.gameStarted = true;
                    timerInterval = $interval(function() {
                        $scope.elapsedTime++;
                    }, 1000);
                }
            };
            
            // Format time
            $scope.formatTime = function(seconds) {
                if (!seconds) return '0:00';
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return mins + ':' + (secs < 10 ? '0' : '') + secs;
            };
            
            // Flip card
            $scope.flipCard = function(index) {
                if (!canFlip) return;
                
                const card = $scope.cards[index];
                
                if (card.matched || card.flipped || $scope.flippedCards.length >= 2) {
                    return;
                }
                
                $scope.startTimer();
                
                card.flipped = true;
                $scope.flippedCards.push(index);
                
                // Create particle effect
                createParticles(card.emoji);
                
                if ($scope.flippedCards.length === 2) {
                    $scope.moves++;
                    canFlip = false;
                    $timeout($scope.checkMatch, 1000);
                }
            };
            
            // Check for match
            $scope.checkMatch = function() {
                const [index1, index2] = $scope.flippedCards;
                const card1 = $scope.cards[index1];
                const card2 = $scope.cards[index2];
                
                if (card1.emoji === card2.emoji) {
                    // Match found
                    card1.matched = true;
                    card2.matched = true;
                    $scope.matchedPairs++;
                    
                    // Create celebration particles
                    createCelebrationParticles();
                    
                    if ($scope.matchedPairs === $scope.totalPairs) {
                        $scope.winGame();
                    }
                } else {
                    // No match
                    card1.flipped = false;
                    card2.flipped = false;
                }
                
                $scope.flippedCards = [];
                canFlip = true;
            };
            
            // Win game
            $scope.winGame = function() {
                if (timerInterval) {
                    $interval.cancel(timerInterval);
                }
                
                // Check for new record
                if ($scope.bestTime === 0 || $scope.elapsedTime < $scope.bestTime) {
                    $scope.bestTime = $scope.elapsedTime;
                    $scope.isNewRecord = true;
                    localStorage.setItem('memoryBestTime', $scope.bestTime);
                }
                
                $timeout(function() {
                    $scope.gameWon = true;
                }, 500);
            };
            
            // Restart game
            $scope.restartGame = function() {
                $scope.initGame();
            };
            
            // Create particles
            function createParticles(emoji) {
                for (let i = 0; i < 5; i++) {
                    $timeout(function() {
                        const particle = document.createElement('div');
                        particle.className = 'particle';
                        particle.textContent = emoji;
                        particle.style.fontSize = '30px';
                        particle.style.left = (Math.random() * window.innerWidth) + 'px';
                        particle.style.top = (Math.random() * window.innerHeight) + 'px';
                        document.body.appendChild(particle);
                        
                        setTimeout(() => particle.remove(), 2000);
                    }, i * 100);
                }
            }
            
            // Create celebration particles
            function createCelebrationParticles() {
                const emojis = ['‚ú®', 'üéâ', '‚≠ê', 'üí´'];
                for (let i = 0; i < 10; i++) {
                    $timeout(function() {
                        const particle = document.createElement('div');
                        particle.className = 'particle';
                        particle.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                        particle.style.fontSize = '40px';
                        particle.style.left = (Math.random() * window.innerWidth) + 'px';
                        particle.style.top = (Math.random() * window.innerHeight) + 'px';
                        document.body.appendChild(particle);
                        
                        setTimeout(() => particle.remove(), 2000);
                    }, i * 50);
                }
            }
            
            // Keyboard controls
            document.addEventListener('keydown', function(e) {
                $scope.$apply(function() {
                    if ($scope.gameWon) {
                        if (e.keyCode === 13) { // OK
                            $scope.restartGame();
                        }
                        return;
                    }
                    
                    const maxIndex = $scope.cards.length - 1;
                    
                    switch(e.keyCode) {
                        case 37: // Left
                            if ($scope.focusedIndex % $scope.cols > 0) {
                                $scope.focusedIndex--;
                            }
                            break;
                        case 38: // Up
                            if ($scope.focusedIndex >= $scope.cols) {
                                $scope.focusedIndex -= $scope.cols;
                            }
                            break;
                        case 39: // Right
                            if ($scope.focusedIndex % $scope.cols < $scope.cols - 1 && $scope.focusedIndex < maxIndex) {
                                $scope.focusedIndex++;
                            }
                            break;
                        case 40: // Down
                            if ($scope.focusedIndex + $scope.cols <= maxIndex) {
                                $scope.focusedIndex += $scope.cols;
                            }
                            break;
                        case 13: // OK
                            $scope.flipCard($scope.focusedIndex);
                            break;
                        case 10009: // Back
                        case 27: // ESC
                            $scope.restartGame();
                            break;
                    }
                });
            });
            
            // Initialize game on load
            $scope.initGame();
        });
    </script>
</body>
</html>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            padding: 40px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 60px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 30px;
        }
        
        .stat-box {
            background: rgba(255,255,255,0.2);
            padding: 15px 40px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            text-align: center;
        }
        
        .stat-label {
            font-size: 18px;
            color: rgba(255,255,255,0.9);
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: white;
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .card {
            aspect-ratio: 1;
            background: white;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            position: relative;
        }
        
        .card.focused {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255,255,255,0.8);
            border: 5px solid yellow;
        }
        
        .card.flipped {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .card.matched {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
            animation: matchPulse 0.5s;
        }
        
        .card:not(.flipped):not(.matched)::before {
            content: '?';
            font-size: 100px;
            color: #f5576c;
        }
        
        @keyframes matchPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .win-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .win-screen.show {
            display: flex;
        }
        
        .win-screen h2 {
            font-size: 80px;
            color: #4ecdc4;
            margin-bottom: 30px;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .win-screen p {
            font-size: 30px;
            color: white;
            margin-bottom: 40px;
        }
        
        .win-screen button {
            font-size: 28px;
            padding: 20px 60px;
            background: #4ecdc4;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        
        .controls {
            text-align: center;
            color: white;
            font-size: 18px;
            margin-top: 20px;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üß† MEMORY GAME</h1>
    </div>
    
    <div class="stats">
        <div class="stat-box">
            <div class="stat-label">Moves</div>
            <div class="stat-value" id="moves">0</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Matches</div>
            <div class="stat-value" id="matches">0</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Time</div>
            <div class="stat-value" id="time">0:00</div>
        </div>
    </div>
    
    <div class="game-board" id="gameBoard"></div>
    
    <div class="controls">
        Use Arrow Keys to navigate | Press OK to flip card | Press Back to restart
    </div>
    
    <div class="win-screen" id="winScreen">
        <h2>üéâ YOU WIN! üéâ</h2>
        <p>Moves: <span id="finalMoves">0</span> | Time: <span id="finalTime">0:00</span></p>
        <button onclick="restartGame()">Play Again (OK)</button>
    </div>
    
    <script>
        const emojis = ['üçé', 'üçå', 'üçá', 'üçä', 'üçì', 'üçâ', 'üçí', 'üçë'];
        let cards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let moves = 0;
        let focusedIndex = 0;
        let gameStarted = false;
        let startTime = 0;
        let timerInterval = null;
        
        const gameBoard = document.getElementById('gameBoard');
        const movesElement = document.getElementById('moves');
        const matchesElement = document.getElementById('matches');
        const timeElement = document.getElementById('time');
        const winScreen = document.getElementById('winScreen');
        
        // Initialize game
        function initGame() {
            // Create card pairs
            cards = [...emojis, ...emojis]
                .sort(() => Math.random() - 0.5)
                .map((emoji, index) => ({
                    id: index,
                    emoji: emoji,
                    flipped: false,
                    matched: false
                }));
            
            // Reset game state
            flippedCards = [];
            matchedPairs = 0;
            moves = 0;
            focusedIndex = 0;
            gameStarted = false;
            
            movesElement.textContent = moves;
            matchesElement.textContent = matchedPairs;
            timeElement.textContent = '0:00';
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            renderBoard();
        }
        
        // Render game board
        function renderBoard() {
            gameBoard.innerHTML = '';
            
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.dataset.index = index;
                
                if (card.flipped || card.matched) {
                    cardElement.classList.add('flipped');
                    cardElement.textContent = card.emoji;
                }
                
                if (card.matched) {
                    cardElement.classList.add('matched');
                }
                
                if (index === focusedIndex) {
                    cardElement.classList.add('focused');
                }
                
                gameBoard.appendChild(cardElement);
            });
        }
        
        // Start timer
        function startTimer() {
            if (!gameStarted) {
                gameStarted = true;
                startTime = Date.now();
                timerInterval = setInterval(updateTimer, 1000);
            }
        }
        
        // Update timer
        function updateTimer() {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            timeElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Flip card
        function flipCard(index) {
            const card = cards[index];
            
            if (card.matched || card.flipped || flippedCards.length >= 2) {
                return;
            }
            
            startTimer();
            
            card.flipped = true;
            flippedCards.push(index);
            renderBoard();
            
            if (flippedCards.length === 2) {
                moves++;
                movesElement.textContent = moves;
                checkMatch();
            }
        }
        
        // Check for match
        function checkMatch() {
            const [index1, index2] = flippedCards;
            const card1 = cards[index1];
            const card2 = cards[index2];
            
            setTimeout(() => {
                if (card1.emoji === card2.emoji) {
                    // Match found
                    card1.matched = true;
                    card2.matched = true;
                    matchedPairs++;
                    matchesElement.textContent = matchedPairs;
                    
                    if (matchedPairs === emojis.length) {
                        winGame();
                    }
                } else {
                    // No match
                    card1.flipped = false;
                    card2.flipped = false;
                }
                
                flippedCards = [];
                renderBoard();
            }, 1000);
        }
        
        // Win game
        function winGame() {
            clearInterval(timerInterval);
            document.getElementById('finalMoves').textContent = moves;
            document.getElementById('finalTime').textContent = timeElement.textContent;
            winScreen.classList.add('show');
        }
        
        // Restart game
        function restartGame() {
            winScreen.classList.remove('show');
            initGame();
        }
        
        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            if (winScreen.classList.contains('show')) {
                if (e.keyCode === 13) { // OK
                    restartGame();
                }
                return;
            }
            
            switch(e.keyCode) {
                case 37: // Left
                    if (focusedIndex % 4 > 0) {
                        focusedIndex--;
                        renderBoard();
                    }
                    break;
                case 38: // Up
                    if (focusedIndex >= 4) {
                        focusedIndex -= 4;
                        renderBoard();
                    }
                    break;
                case 39: // Right
                    if (focusedIndex % 4 < 3) {
                        focusedIndex++;
                        renderBoard();
                    }
                    break;
                case 40: // Down
                    if (focusedIndex < 12) {
                        focusedIndex += 4;
                        renderBoard();
                    }
                    break;
                case 13: // OK
                    flipCard(focusedIndex);
                    break;
                case 10009: // Back
                case 27: // ESC
                    restartGame();
                    break;
            }
        });
        
        // Initialize game on load
        initGame();
    </script>
</body>
</html>
